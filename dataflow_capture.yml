# Multi-View Capture Dataflow for GEN72
# ======================================
# Implements 3-viewpoint photography workflow with fallback positioning

nodes:
  # Planning Scene Manager
  - id: planning_scene
    path: planning_scene_op.py
    inputs:
      robot_state: capture/robot_state
      scene_command: capture/scene_command
      tick: dora/timer/millis/5000
    outputs:
      - scene_update
      - command_result

  # OMPL Motion Planner
  - id: planner
    path: planner_ompl_with_collision_op.py
    inputs:
      plan_request: capture/plan_request
      scene_update: planning_scene/scene_update
    outputs:
      - trajectory
      - plan_status

  # Inverse Kinematics Solver
  - id: ik_solver
    path: ik_op.py
    inputs:
      ik_request: capture/ik_request
      joint_state: capture/robot_state
    outputs:
      - ik_solution
      - ik_status

  # Multi-View Capture Controller
  - id: capture
    path: multi_view_capture_node.py
    inputs:
      trajectory: planner/trajectory
      plan_status: planner/plan_status
      ik_solution: ik_solver/ik_solution
      ik_status: ik_solver/ik_status
    outputs:
      - robot_state
      - plan_request
      - ik_request
      - scene_command
